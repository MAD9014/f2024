<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>13.1 Observers | MAD9014</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Cross-Platform Web Development">
    
    <link rel="preload" href="/f2024/assets/css/0.styles.0983e6c5.css" as="style"><link rel="preload" href="/f2024/assets/js/app.1fe26343.js" as="script"><link rel="preload" href="/f2024/assets/js/2.309c8f6c.js" as="script"><link rel="preload" href="/f2024/assets/js/28.69283b6d.js" as="script"><link rel="preload" href="/f2024/assets/js/4.1db6dd32.js" as="script"><link rel="preload" href="/f2024/assets/js/6.42129677.js" as="script"><link rel="prefetch" href="/f2024/assets/js/10.44e74f42.js"><link rel="prefetch" href="/f2024/assets/js/11.13d86ffd.js"><link rel="prefetch" href="/f2024/assets/js/12.3fb6dd52.js"><link rel="prefetch" href="/f2024/assets/js/13.28acfa0e.js"><link rel="prefetch" href="/f2024/assets/js/14.c4c8460d.js"><link rel="prefetch" href="/f2024/assets/js/15.232dbc96.js"><link rel="prefetch" href="/f2024/assets/js/16.4b012593.js"><link rel="prefetch" href="/f2024/assets/js/17.8a9f3b67.js"><link rel="prefetch" href="/f2024/assets/js/18.5cd65609.js"><link rel="prefetch" href="/f2024/assets/js/19.0f604b11.js"><link rel="prefetch" href="/f2024/assets/js/20.72adfa2c.js"><link rel="prefetch" href="/f2024/assets/js/21.5be20940.js"><link rel="prefetch" href="/f2024/assets/js/22.19cc8e02.js"><link rel="prefetch" href="/f2024/assets/js/23.31ebc8b9.js"><link rel="prefetch" href="/f2024/assets/js/24.00b755ec.js"><link rel="prefetch" href="/f2024/assets/js/25.a6bda48d.js"><link rel="prefetch" href="/f2024/assets/js/26.0af317fa.js"><link rel="prefetch" href="/f2024/assets/js/27.c417d3c2.js"><link rel="prefetch" href="/f2024/assets/js/29.2ec39f4b.js"><link rel="prefetch" href="/f2024/assets/js/3.0ff4921b.js"><link rel="prefetch" href="/f2024/assets/js/30.2fec257d.js"><link rel="prefetch" href="/f2024/assets/js/31.8ba062aa.js"><link rel="prefetch" href="/f2024/assets/js/32.7030e1ea.js"><link rel="prefetch" href="/f2024/assets/js/33.0b7f6c06.js"><link rel="prefetch" href="/f2024/assets/js/34.ac3859db.js"><link rel="prefetch" href="/f2024/assets/js/35.2050ddde.js"><link rel="prefetch" href="/f2024/assets/js/36.da367d38.js"><link rel="prefetch" href="/f2024/assets/js/37.b5c49771.js"><link rel="prefetch" href="/f2024/assets/js/38.dbafaa22.js"><link rel="prefetch" href="/f2024/assets/js/39.c8f62f4e.js"><link rel="prefetch" href="/f2024/assets/js/40.a06e1bdb.js"><link rel="prefetch" href="/f2024/assets/js/41.07f427cf.js"><link rel="prefetch" href="/f2024/assets/js/42.675dfc16.js"><link rel="prefetch" href="/f2024/assets/js/43.75d3d889.js"><link rel="prefetch" href="/f2024/assets/js/44.c3e62b4c.js"><link rel="prefetch" href="/f2024/assets/js/45.8e7fad2c.js"><link rel="prefetch" href="/f2024/assets/js/46.dd175986.js"><link rel="prefetch" href="/f2024/assets/js/47.fe770d77.js"><link rel="prefetch" href="/f2024/assets/js/48.fc338352.js"><link rel="prefetch" href="/f2024/assets/js/49.6f65c285.js"><link rel="prefetch" href="/f2024/assets/js/5.add29278.js"><link rel="prefetch" href="/f2024/assets/js/7.5e49a92f.js"><link rel="prefetch" href="/f2024/assets/js/8.3f0a9cd3.js"><link rel="prefetch" href="/f2024/assets/js/9.a3806b98.js">
    <link rel="stylesheet" href="/f2024/assets/css/0.styles.0983e6c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/f2024/" class="home-link router-link-active"><img src="/f2024/mad-d-logo-sm.png" alt="MAD9014" class="logo"> <span class="site-name can-hide">MAD9014</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/f2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/f2024/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/f2024/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/f2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/f2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/f2024/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/f2024/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/f2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Core JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Browser JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/f2024/modules/browser-js/week5/dom-1/" class="sidebar-link">5.1: Document Object Model</a></li><li><a href="/f2024/modules/browser-js/week5/dom-2/" class="sidebar-link">5.2: Document Object Model</a></li><li><a href="/f2024/modules/browser-js/week6/events/" class="sidebar-link">6.1: Handling Events</a></li><li><a href="/f2024/modules/browser-js/week6/forms-events/" class="sidebar-link">6.2: Forms &amp; Events</a></li><li><a href="/f2024/modules/browser-js/week7/project-structure/" class="sidebar-link">7.1: Code Structure &amp; Approaches</a></li><li><a href="/f2024/modules/browser-js/week9/promises/" class="sidebar-link">9.1: Promises</a></li><li><a href="/f2024/modules/browser-js/week9/async/" class="sidebar-link">9.2: Asynchronous Programming</a></li><li><a href="/f2024/modules/browser-js/week10/ajax/" class="sidebar-link">10.1: AJAX and Fetch</a></li><li><a href="/f2024/modules/browser-js/week10/fetch-apis/" class="sidebar-link">10.2: Fetch and APIs</a></li><li><a href="/f2024/modules/browser-js/week11/fetch-data/" class="sidebar-link">11.1: Dynamic Data</a></li><li><a href="/f2024/modules/browser-js/week11/security/" class="sidebar-link">11.2: Fetch Security</a></li><li><a href="/f2024/modules/browser-js/week12/storage/" class="sidebar-link">12.1: HTML5 APIs</a></li><li><a href="/f2024/modules/browser-js/week12/multi-page/" class="sidebar-link">12.2: Multi-Page, SPA, and JAMStack </a></li><li><a href="/f2024/modules/browser-js/week13/observers/" aria-current="page" class="active sidebar-link">13.1: Observers &amp; Classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/f2024/modules/browser-js/week13/observers/#observers" class="sidebar-link">Observers</a></li><li class="sidebar-sub-header"><a href="/f2024/modules/browser-js/week13/observers/#js-classes" class="sidebar-link">JS Classes</a></li><li class="sidebar-sub-header"><a href="/f2024/modules/browser-js/week13/observers/#what-to-do-this-week" class="sidebar-link">What to do this week</a></li></ul></li><li><a href="/f2024/modules/browser-js/week13/destructure/" class="sidebar-link">13.2: Destructuring, Spread, &amp; Enumeration</a></li><li><a href="/f2024/modules/browser-js/week14/project-2/" class="sidebar-link">14: Final Project</a></li><li><a href="/f2024/modules/browser-js/week15/" class="sidebar-link">15: Final Project</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hybrid Content</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title blue">
    Web Apps
  </div> <h1>13.1 Observers</h1></header> <h2 id="observers"><a href="#observers" class="header-anchor">#</a> Observers</h2> <p>The Observer APIs allow us to create objects that watch selected parts of the DOM. If changes to the DOM elements we can automatically have a callback function run.</p> <h3 id="resize-observer"><a href="#resize-observer" class="header-anchor">#</a> Resize Observer</h3> <p>The <code>resize observer</code> can be used to duplicate the same functionality as a Media Query, but the real power is being able to watch specific DOM elements instead of the whole page and see if the desired
element has changed to meet a dynamic size criteria, then we can do <strong>anything</strong> we want with JavaScript. We can add or remove elements from the page. We can fetch new content. We can apply new CSS.
We can rearrange our page layout entirely.</p> <p>The basic script works like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//create an observer passing in a callback function</span>
<span class="token keyword">let</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResizeObserver</span><span class="token punctuation">(</span>handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//tell the observer what to watch</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.something'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//create your callback function</span>
<span class="token keyword">function</span> <span class="token function">handleResize</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//function will be sent an array of elements being observed</span>
  <span class="token comment">//each entry has a `target` property that points to the observed element</span>
  <span class="token keyword">let</span> myelement <span class="token operator">=</span> entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  myelement<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hasChanged'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//each entry also has a `contentRect` object with width and height properties</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>contentRect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>contentRect<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>And here is a video that explains the whole process.</p> <div title="resize observer" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/jxcoo5oM_oQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver" target="_blank" rel="noopener noreferrer">MDN reference for Resize Observer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="intersection-observer"><a href="#intersection-observer" class="header-anchor">#</a> Intersection Observer</h3> <p>The <code>intersection observer</code> is a very common observer. It is used to create effects on the page as the user scrolls. When an observed element intersects with an area of the screen, it triggers the
callback and lets you run your script. Generally, the script will do something like add a css class to trigger a transition or animation. However, it could also do something like fetch new content
from a remote API or the Cache.</p> <p>The intersection observers work in a similar way to the resize observer. You create the observer and then tell it what to watch. There will be a callback function that runs when the intersections
occur. The callback function will be pass the array of elements being observed with properties about each that you can use in deciding what you want to do.</p> <p>The intersection observers need some extra options that you define when creating it. The first option is called <code>root</code>, and it defines the viewport that will be used to watch for intersections with
the observed element. The second is <code>rootMargin</code> and lets you expand or shrink your viewport when watching for intersections. The final option is <code>threshold</code> and let's you define a percentage of how
much of the observed element must be intersecting with the viewport before calling the callback function.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//set up the options</span>
<span class="token keyword">let</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">//null means the whole screen. Otherwise it can be another element as the viewport</span>
  <span class="token literal-property property">rootMargin</span><span class="token operator">:</span> <span class="token string">'0px -50px'</span><span class="token punctuation">,</span> <span class="token comment">//top-bottom and left-right values.</span>
  <span class="token comment">//positive means bigger than viewport. negative means inset from edges</span>
  <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token comment">//percentage of observed element inside defined area. 0.5 == 50%</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//create the observer with the options and callback function</span>
<span class="token keyword">let</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>handleIntersect<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//tell it what to observe.</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.somediv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>If you want to observe many elements then just call observe on each.</p> <p>There is also an <code>unobserve</code> method that lets you remove an element from the set being observed.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleIntersect</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//for each observed item report if it is currently intersecting</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//boolean value</span>
    <span class="token comment">//use an if statement to do whatever you like</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>First video is a basic introduction to building an intersection observer and demonstrates effects on paragraphs as the user scrolls.</p> <div title="intro to intersection observer" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/gQ8WggeHoJU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>The second video shows how you could build an infinite scrolling system that dynamically loads new content as the user scrolls.</p> <div title="infinite scroll with intersection observer" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/1EeVzn02grw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener noreferrer">MDN reference for Intersection Observer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="mutation-observer"><a href="#mutation-observer" class="header-anchor">#</a> Mutation Observer</h3> <p>The <code>Mutation Observer</code> will let you observe DOM elements and watch for changes to their <code>textContent</code> or <code>attributes</code> or <code>children</code>. It can be a useful observer to do things like highlight areas of
the page when new content is added, changed, or removed.</p> <p>Similar to the Intersection Observer, the Mutation Observer needs a set of options.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//set the options</span>
<span class="token keyword">const</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//report if attributes are changed</span>
  <span class="token literal-property property">attributeFilter</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'href'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//optional list of attributes to watch</span>
  <span class="token literal-property property">attributeOldValue</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//optional. if true old value will be saved for callback function</span>
  <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//report if children are changed</span>
  <span class="token literal-property property">characterData</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//optional. if true, will save the text for the callback function</span>
  <span class="token literal-property property">characterDataOldValue</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//optional. if true old text value will be saved for callback function</span>
  <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//report if elements further down in the descendent tree are changed</span>
  <span class="token comment">//this last one, pluse the characterData ones can come with a performance hit.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//create the observer object with callback function and options</span>
<span class="token keyword">let</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>handleMutation<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//add the element(s) you want to watch</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.somediv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>You can add more elements by calling <code>observe()</code> again to add other elements to the observed set. You can always call <code>unobserve()</code> to remove elements from the observed set.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleMutation</span><span class="token punctuation">(</span><span class="token parameter">mutations</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//entries is the list of _MUTATED_ observed elements</span>
  <span class="token comment">//each will have a `type` property that indicates which type of mutation it is</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>mutations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'childList'</span><span class="token operator">:</span>
      <span class="token comment">//a child element was mutated</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//old and new values might be available if set in options</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'attributes'</span><span class="token operator">:</span>
      <span class="token comment">//attribute was changed</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//we can find out which attribute was mutated</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>attributeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//plus the old and new values if set in options</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token comment">//subTree mutation</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div title="Mutation Observer" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/RQ1N_EP07xs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver" target="_blank" rel="noopener noreferrer">MDN reference for Mutation Observer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="js-classes"><a href="#js-classes" class="header-anchor">#</a> JS Classes</h2> <p>JavaScript does not have actual &quot;classes&quot; like languages such as Swift, Kotlin, C++, C#, etc. JavaScript uses prototypes to define how object properties and methods are shared through inheritance.</p> <p>However, because of 20 years of confusion over how the keyword <code>this</code> works, a desire to standardize the syntax for creating new objects, plus due to the number of developers coming to JavaScript from
other languages in the last 10 years, a <code>class</code> keyword was added. A syntactic sugar was added to JavaScript that lets developers create objects with a class-like syntax.</p> <p>If you want to create an Object in JavaScript there are a number of ways that you can do this.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//an object literal</span>
<span class="token comment">//just write what you want as the props and use the default values for all property descriptors</span>
<span class="token keyword">let</span> objLiteral <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Steve'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//internally, this will call new Object()</span>

<span class="token comment">//use the Object constructor and pass it an object literal</span>
<span class="token keyword">let</span> objInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Steve'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Object.create method</span>
<span class="token comment">//pass in a prototype object reference and a properties object</span>
<span class="token keyword">let</span> createdObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>somePrototypeObjectReference<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'Steve'</span><span class="token punctuation">,</span> <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//A constructor function</span>
<span class="token comment">//when calling a function with `new` the return value will be your new object</span>
<span class="token comment">//CANNOT do this with an ARROW function</span>
<span class="token keyword">function</span> <span class="token function">myBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">//add properties to the object that will be returned</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Steve'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> constructedObjInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>You can then extend the functionality of any object by using the <code>prototype</code> keyword to add methods to the <code>prototype</code> object. The <code>prototype</code> is the place to put methods that will be shared by all instances of the object type.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//to add something to a prototype, we use the prototype property</span>
<span class="token comment">//when we have access to the constructor function itself</span>
myBuilder<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someNewMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//with the object instances we need to get to the constructor object to find the prototype object.</span>
<span class="token comment">//the object instances are the objects that are built by the constructor function.</span>
<span class="token comment">//Two ways to access the prototype property.</span>
<span class="token comment">//1. with the `constructor` property</span>
objLiteral<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someNewMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
createdObj<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someNewMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
objInstance<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someNewMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
constructedObjInstance<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someNewMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 2. by using the __proto__ as the shortcut for `constructor.prototype`</span>
<span class="token comment">//this is a non-standard way to do this</span>
objLiteral<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function-variable function">someNewMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>When ES6 was launched it added the <code>class</code> keyword to JavaScript as a syntactic sugar. This was an attempt to standardize (yet again) the way that objects are created in JavaScript and to make the
language appear more familiar to the many developers migrating to JavaScript from other languages.</p> <p>This does not mean that JavaScript has classes like object oriented languages, such as Java, do. JavaScript STILL uses <code>prototype</code> when creating the inheritance for objects. This is just a different way to write the code to extend and connect objects and their prototypes.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">myObjType</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Steve'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">someNewMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//this method is added to the prototype</span>
    <span class="token comment">//note the shorthand syntax for defining the function without `function`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//create one of your objects, just like with a function plus `new`</span>
<span class="token keyword">let</span> myClassObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myObjType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//calls the constructor() function</span>
<span class="token comment">//myClassObj will have the two properties - id and name</span>
<span class="token comment">//the prototype for myClassObj's constructor will hold the `someNewMethod` function</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>By using the <code>class</code> keyword we can build their constructors, define their properties and define their prototype methods in a more predictable way. This does not stop JS using the <code>prototype</code> chain or
change how anything happens internally.</p> <blockquote><p>You will still use the Object literal syntax for 80%+ of what you do with objects in JavaScript. The class syntax just gives you an alternative standard to follow when things become more complex.</p></blockquote> <div title="Object create method" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/qqyZn8X9M3I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="Object assign method" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/UkGsRyGeI2g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="Different ways to create objects" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/UrM9xgPxq1E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="Prototype vs Class" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/XoQKXDWbL1M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="JS Classes in 2021" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/tqBP5ZX8F0c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="what-to-do-this-week"><a href="#what-to-do-this-week" class="header-anchor">#</a> What to do this week</h2> <div class="custom-block warning"><p class="custom-block-title">TODO Things to do before next week.</p> <ul><li>Read all the content from <code>Modules 13.1, 13.2, and 14.1</code>.</li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/24/2024, 9:44:35 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/f2024/modules/browser-js/week12/multi-page/" class="prev">
        12.2: Multi-Page, SPA, and JAMStack 
      </a></span> <span class="next"><a href="/f2024/modules/browser-js/week13/destructure/">
        13.2: Destructuring, Spread, &amp; Enumeration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/f2024/assets/js/app.1fe26343.js" defer></script><script src="/f2024/assets/js/2.309c8f6c.js" defer></script><script src="/f2024/assets/js/28.69283b6d.js" defer></script><script src="/f2024/assets/js/4.1db6dd32.js" defer></script><script src="/f2024/assets/js/6.42129677.js" defer></script>
  </body>
</html>
